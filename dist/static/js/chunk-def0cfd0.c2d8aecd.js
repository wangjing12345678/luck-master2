(window["webpackJsonpaaa"]=window["webpackJsonpaaa"]||[]).push([["chunk-def0cfd0"],{"0ea5":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("div",{staticClass:"trangle",on:{click:t.reset}},[t._v("重置")]),t.luckArr.length?e("div",{staticClass:"cricle-content"},[e("Turntable",{ref:"circle",attrs:{luckArr:t.luckArr},on:{resultNotice:t.resultNotice}}),e("div",{staticClass:"start-button",on:{click:t.start}},[t._m(0)])],1):t._e()])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"start-button-area"},[e("img",{attrs:{src:r("1d42"),alt:""}})])}],a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"circle"},[e("div",{ref:"rotate-content",staticClass:"circle-in",class:t.currState,attrs:{id:t.elId},on:{transitionend:t._transEnd,webkitTransitionEnd:t._transEnd}},[e("div",{staticClass:"circle-white"},[t._l(t.luckArr,(function(r,i){return e("div",{key:i,staticClass:"prize-content"},[e("div",{staticClass:"prize-content-word"},[t._v(t._s(r.itemname))])])})),t._l(t.luckArr,(function(t,r){return e("div",{key:"luck"+r,staticClass:"prize",style:{background:r%2==0?"#fff":"rgb(251,201,142)"}})}))],2)])])])},n=[];r("14d9");const c={STATIC:"static",BRAKE:"brake",STOP:"stop"};var o={name:"turntable",props:["luckArr"],data(){return{el:null,elId:0,currState:c.STATIC,deg:0,flag:0,degArr:[],randomDeg:"",errorDeg:10,luckNum:"",waitDeg:0,waitTime:"",waitState:!1,timeOut:!1}},computed:{degNum(){return this.luckArr.length}},created(){this.elId=`__roulette_${this._uid}_${(new Date).getTime()}`},mounted(){this.el=document.getElementById(this.elId);var t=this;this.$nextTick(()=>{document.querySelectorAll(".prize").forEach((function(e,r){var i=90-360/t.degNum/2;e.style.transform=0==r?"rotate("+i+"deg)skewX("+(90-360/t.degNum)+"deg)":"rotate("+(i+360/t.degNum*r)+"deg)skewX("+(90-360/t.degNum)+"deg)"})),document.querySelectorAll(".prize-content").forEach((function(e,r){var i=90-360/t.degNum/2;e.style.transform=0==r?"rotate("+i+"deg)":"rotate("+(i+360/t.degNum*r)+"deg)"}))}),this.calcDeg()},methods:{play(){this.currState==c.STATIC||this.currState==c.STOP?(this.setDeg(),setTimeout(()=>{this.luckNum=5,this.waitState=!0},1e3)):console.log("旋转不可点击")},setDeg(){this.waitDeg=0;let t=0;this.waitTime=setInterval(()=>{if(this.waitDeg<9e3?this.timeOut=!1:this.timeOut=!0,t+=1,this.waitState&&this.timeOut){this.calcRandomDeg(),this.flag=360-this.waitDeg%360+this.waitDeg;var e=0;if(1==this.luckNum){var r=Math.floor(2*Math.random());e=this.randomDeg[r]}else e=this.randomDeg;this.waitDeg=this.flag+-e}else this.waitDeg=20*t;this.el.style.cssText=`-webkit-transform:rotate(${this.waitDeg}deg);\n               -webkit-transition-duration:5s;\n\t\t\t  transform:rotate(${this.waitDeg}deg);\n\t\t\t  transition-duration:5s`,this.waitState&&this.timeOut&&(this.currState=c.BRAKE,clearInterval(this.waitTime))},20)},calcRandomDeg(){var t=this.degArr.find(t=>t.id==this.luckNum);if(1==this.luckNum){var e=Math.floor(Math.random()*(t.range1[1]-t.range1[0]+1))+t.range1[0],r=Math.floor(Math.random()*(t.range2[1]-t.range2[0]+1))+t.range2[0];this.randomDeg=[e,r]}else this.randomDeg=Math.floor(Math.random()*(t.range1[1]-t.range1[0]+1))+t.range1[0]},calcDeg(){for(var t=360/this.degNum,e=0;e<this.luckArr.length;e++)if(0==e){var r=360-t/2,i=t/2,s=[0+this.errorDeg,i-this.errorDeg],a=[r+this.errorDeg,360-this.errorDeg],n={id:this.luckArr[e].id,range1:s,range2:a};this.degArr.push(n)}else{s=[t/2+t*(e-1)+this.errorDeg,t/2+t*e-this.errorDeg],n={id:this.luckArr[e].id,range1:s};this.degArr.push(n)}console.log(this.degArr)},reset(){this.currState=c.STATIC,this.deg=0,this.flag=0,this.randomDeg="",this.waitTime=null,this.waitDeg=0,this.waitState=!1,this.timeOut=!1,this.el.style.cssText=`-webkit-transform:rotate(${this.deg}deg);\n\t\t\t\t\t\t\t-webkit-transition-duration:0s;\n\t\t\t\t\t\t\ttransform:rotate(${this.deg}deg);\n\t\t\t\t\t\t\ttransition-duration:0s`},_transEnd(){this.currState==c.BRAKE&&(this.currState=c.STOP),this.$emit("resultNotice")}}},l=o,u=(r("8624"),r("2877")),d=Object(u["a"])(l,a,n,!1,null,"4858a7b8",null),h=d.exports,g={name:"raffle",data(){return{luckArr:[{id:"1",itemname:"一等奖"},{id:"2",itemname:"二等奖"},{id:"3",itemname:"三等奖"},{id:"4",itemname:"四等奖"},{id:"5",itemname:"五等奖"},{id:"6",itemname:"未中奖"},{id:"7",itemname:"六等奖"},{id:"8",itemname:"七等奖"}]}},components:{Turntable:h},mounted(){},methods:{sortdown(t){for(var e=0;e<t.length-1;e++)for(var r=0;r<t.length-1-e;r++)if(t[r].itemnum<t[r+1].itemnum){var i=t[r];t[r]=t[r+1],t[r+1]=i}return t},start(){"static"!=this.$refs.circle.currState&&"stop"!=this.$refs.circle.currState||this.$refs.circle.play()},reset(){this.$refs.circle.reset()},resultNotice(){console.log("结束")}}},m=g,f=(r("57d9"),Object(u["a"])(m,i,s,!1,null,"1bd0b71c",null));e["default"]=f.exports},"1d42":function(t,e,r){t.exports=r.p+"static/img/button.78ec7584.png"},"37c7":function(t,e,r){},5472:function(t,e,r){},"57d9":function(t,e,r){"use strict";r("37c7")},8624:function(t,e,r){"use strict";r("5472")}}]);