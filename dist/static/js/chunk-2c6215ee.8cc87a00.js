(window["webpackJsonpaaa"]=window["webpackJsonpaaa"]||[]).push([["chunk-2c6215ee"],{"06b7":function(t,e,a){},bbf6:function(t,e,a){"use strict";a("06b7")},c47e:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("el-form",{attrs:{model:t.form}},[e("el-form-item",[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.form.list}},[e("el-table-column",{attrs:{label:"日期",width:"180",prop:"date"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{model:{value:a.row.date,callback:function(e){t.$set(a.row,"date",e)},expression:"scope.row.date"}})]}}])})],1)],1)],1)},i=[];const n={data(){return{_saveTimer:null}},created(){this.restorePageData(),window.addEventListener("beforeunload",this.savePageData)},destroyed(){window.removeEventListener("beforeunload",this.savePageData),this._saveTimer&&clearTimeout(this._saveTimer)},watch:{$data:{handler:function(){this._saveTimer&&clearTimeout(this._saveTimer),this._saveTimer=setTimeout(()=>{this.savePageData()},1e3)},deep:!0}},methods:{savePageData(){const t=["_saveTimer"],e={};Object.keys(this.$data).forEach(a=>{t.includes(a)||(e[a]=this.$data[a])});const a={timestamp:(new Date).getTime(),componentName:this.$options.name,data:e};localStorage.setItem(this.getStorageKey(),JSON.stringify(a))},restorePageData(){const t=localStorage.getItem(this.getStorageKey());if(t)try{const{timestamp:e,data:a}=JSON.parse(t),s=new Date(e).toLocaleString();confirm(`发现${s}保存的数据，是否恢复？`)?Object.keys(a).forEach(t=>{console.log(this.$data),console.log(t),this.$data.hasOwnProperty(t)&&Object.assign(this[t],a[t])}):this.clearPageData()}catch(e){console.error("恢复数据失败:",e),this.clearPageData()}},clearPageData(){localStorage.removeItem(this.getStorageKey())},getStorageKey(){return"pageStore_"+(this.$options.name||"unknown")}}};var o={name:"com1",mixins:[n],data(){return{form:{list:[{date:"222"},{date:"333"}]}}}},r=o,l=a("2877"),c=Object(l["a"])(r,s,i,!1,null,null,null);e["a"]=c.exports},d0db:function(module,__webpack_exports__,__webpack_require__){"use strict";var _com1_vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c47e"),_com2_vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e7bc"),_signature_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e7b8");__webpack_exports__["a"]={components:{com1:_com1_vue__WEBPACK_IMPORTED_MODULE_0__["a"],com2:_com2_vue__WEBPACK_IMPORTED_MODULE_1__["a"],Signature:_signature_vue__WEBPACK_IMPORTED_MODULE_2__["a"]},data(){return{signatureImage:"",payeeInfo:[{supplierName:"qqq"}]}},mounted(){console.log(eval(this.convertPath("payeeInfo.0.supplierName",{safeAccess:!0})))},methods:{convertPath(t,e={}){const{prefix:a="this.",useBrackets:s=!1,removeThis:i=!1,safeAccess:n=!1}=e;if(!t)return a;t=t.trim().replace(/^\.+|\.+$/g,"");const o=t.split(".").map((t,e)=>{const a=/^\d+$/.test(t);return a?`[${t}]`:s?`[${JSON.stringify(t)}]`:0===e?t:"."+t}).join("");let r=i?o:a+o;return n&&(r=r.replace(/\./g,"?."),r=r.replace(/\[/g,"?.[")),r},handleSave(t){this.signatureImage=t},handleClear(){this.signatureImage=""},handleError(t){alert(t)},chuli(){}}}},d78b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[t._v(" 缓存组件 "),e("div",{on:{click:t.chuli}},[t._v("缓存开始")]),e("com1",{ref:"com1"}),e("com2",{ref:"com2"}),e("div",{staticClass:"signature-page"},[e("h2",[t._v("手写强制推签名")]),e("Signature",{ref:"signatureRef",attrs:{width:800,height:300,"save-format":"png"},on:{save:t.handleSave,clear:t.handleClear,error:t.handleError}}),t.signatureImage?e("div",{staticClass:"preview"},[e("h3",[t._v("签名预览")]),e("img",{attrs:{src:t.signatureImage,alt:"签名"}})]):t._e()],1)],1)},i=[],n=a("d0db"),o=n["a"],r=a("2877"),l=Object(r["a"])(o,s,i,!1,null,null,null);e["default"]=l.exports},e7b8:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"signature-wrapper"},[e("div",{staticClass:"canvas-container"},[e("canvas",{ref:"signatureCanvas",attrs:{width:t.width,height:t.height},on:{mousedown:t.startDrawing,mousemove:t.draw,mouseup:t.stopDrawing,mouseleave:t.stopDrawing,touchstart:t.handleTouchStart,touchmove:t.handleTouchMove,touchend:t.stopDrawing}})]),e("div",{staticClass:"controls"},[e("button",{on:{click:t.clear}},[t._v("清除")]),e("button",{on:{click:t.save}},[t._v("保存")]),e("div",{staticClass:"pen-settings"},[e("span",[t._v("画笔粗细：")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lineWidth,expression:"lineWidth",modifiers:{number:!0}}],attrs:{type:"range",min:"1",max:"10"},domProps:{value:t.lineWidth},on:{__r:function(e){t.lineWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),e("span",[t._v("颜色：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lineColor,expression:"lineColor"}],attrs:{type:"color"},domProps:{value:t.lineColor},on:{input:function(e){e.target.composing||(t.lineColor=e.target.value)}}})])])])},i=[],n={name:"Signature",props:{width:{type:Number,default:800},height:{type:Number,default:300},saveFormat:{type:String,default:"png",validator:function(t){return-1!==["png","jpeg","webp"].indexOf(t)}}},data(){return{canvas:null,context:null,isDrawing:!1,lastX:0,lastY:0,lineWidth:2,lineColor:"#000000",hasSignature:!1}},mounted(){this.initCanvas()},methods:{initCanvas(){this.canvas=this.$refs.signatureCanvas,this.context=this.canvas.getContext("2d"),this.context.fillStyle="#ffffff",this.context.fillRect(0,0,this.width,this.height),this.context.lineJoin="round",this.context.lineCap="round"},startDrawing(t){this.isDrawing=!0;const{offsetX:e,offsetY:a}=this.getCoordinates(t);this.lastX=e,this.lastY=a},draw(t){if(!this.isDrawing)return;const{offsetX:e,offsetY:a}=this.getCoordinates(t);this.context.beginPath(),this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.lineColor,this.context.moveTo(this.lastX,this.lastY),this.context.lineTo(e,a),this.context.stroke(),this.lastX=e,this.lastY=a,this.hasSignature=!0},stopDrawing(){this.isDrawing=!1},handleTouchStart(t){t.preventDefault();const e=t.touches[0],a=this.canvas.getBoundingClientRect();this.lastX=e.clientX-a.left,this.lastY=e.clientY-a.top,this.isDrawing=!0},handleTouchMove(t){if(t.preventDefault(),!this.isDrawing)return;const e=t.touches[0],a=this.canvas.getBoundingClientRect(),s=e.clientX-a.left,i=e.clientY-a.top;this.context.beginPath(),this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.lineColor,this.context.moveTo(this.lastX,this.lastY),this.context.lineTo(s,i),this.context.stroke(),this.lastX=s,this.lastY=i,this.hasSignature=!0},getCoordinates(t){if(t.offsetX&&t.offsetY)return{offsetX:t.offsetX,offsetY:t.offsetY};const e=this.canvas.getBoundingClientRect();return{offsetX:t.clientX-e.left,offsetY:t.clientY-e.top}},clear(){this.context.fillStyle="#ffffff",this.context.fillRect(0,0,this.width,this.height),this.hasSignature=!1,this.$emit("clear")},save(){if(this.hasSignature)try{const t=this.canvas.toDataURL("image/"+this.saveFormat);this.$emit("save",t)}catch(t){this.$emit("error",t)}else this.$emit("error","请先签名")},isEmpty(){return!this.hasSignature}}},o=n,r=(a("bbf6"),a("2877")),l=Object(r["a"])(o,s,i,!1,null,"e79c20e2",null);e["a"]=l.exports},e7bc:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("el-form",{attrs:{model:t.form}},[e("el-form-item",[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1)},i=[],n={name:"com2",data(){return{form:{name:2}}}},o=n,r=a("2877"),l=Object(r["a"])(o,s,i,!1,null,null,null);e["a"]=l.exports}}]);